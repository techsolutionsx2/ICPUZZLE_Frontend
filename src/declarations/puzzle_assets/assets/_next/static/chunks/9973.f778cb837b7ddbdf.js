(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9973],{79973:function(e,t,n){"use strict";n.r(t);var r=n(16835),a=n(67294),o=n(56131),i=n(84420),u=n.n(i),c=n(85893);Konva.KonvaEventObject;t.default=function(e){var t=e.width,n=e.height,i=e.img,l=e.draggable,d=e.x,f=e.y,s=e.rotation,h=e.onDragStart,g=e.onDragEnd,m=e.onSelect,v=e.dragBoundFunc,y=e.color,E=e.id,b=e.changeColor,w=e.onTransformEnd,x=u()(i),p=(0,r.Z)(x,1)[0],S=(0,a.useRef)(null),C=(0,a.useMemo)((function(){if(b){if(!p)return;var e=document.createElement("canvas");e.width=p.width,e.height=p.height;var t=e.getContext("2d");return t&&y&&(t.fillStyle=y,t.fillRect(0,0,e.width,e.height),t.globalCompositeOperation="destination-in",t.drawImage(p,0,0)),e}return p}),[p,y]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(o.Ee,{id:E,image:C,x:d,y:f,rotation:s||0,draggable:l,width:t,height:n,dragBoundFunc:v,onDragStart:h,onDragEnd:g,ref:S,onClick:function(){return m&&m(S)},name:"image",alt:"No Image",onTransformEnd:function(){var e=S.current,t=e.scaleX(),n=e.scaleY();e.scaleX(1),e.scaleY(1),w&&w({id:E,x:e.x(),y:e.y(),width:Math.max(5,e.width()*t),height:Math.max(e.height()*n),rotation:e.rotation()})}})})}},84420:function(e,t,n){var r=n(67294);e.exports=function(e,t){const n=r.useRef("loading"),a=r.useRef(),[o,i]=r.useState(0),u=r.useRef(),c=r.useRef();return u.current===e&&c.current===t||(n.current="loading",a.current=void 0,u.current=e,c.current=t),r.useLayoutEffect((function(){if(e){var r=document.createElement("img");return r.addEventListener("load",o),r.addEventListener("error",u),t&&(r.crossOrigin=t),r.src=e,function(){r.removeEventListener("load",o),r.removeEventListener("error",u)}}function o(){n.current="loaded",a.current=r,i(Math.random())}function u(){n.current="failed",a.current=void 0,i(Math.random())}}),[e,t]),[a.current,n.current]}},16835:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2937);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);